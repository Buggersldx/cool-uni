{"version":3,"sources":["webpack:///./src/cool/ui/components/form-item/form-item.vue?5db2","webpack:///./src/cool/ui/components/form-item/form-item.vue?f5a6","webpack:///./src/cool/ui/components/form-item/form-item.vue?e6b7","webpack:///./src/cool/ui/components/form-item/form-item.vue?08ed","webpack:///./src/cool/ui/components/form-item/form-item.vue"],"names":["props","prop","String","label","disabled","Boolean","labelWidth","showMessage","type","default","justify","validateOnValueChange","data","required","message","error","validator","computed","label2","labelWidth2","parent","showMessage2","contentWidth","isJustify","isRequired","isError","isSuffix","$scopedSlots","suffix","isDisabled","getParent","call","rules","rules2","changeRule","destroyed","removeField","methods","addField","rule","Array","forEach","e","AsyncValidator","onResponse","value","action","$nextTick","validate","onListener","unwatch","$watch","model","val","deep","errors","fields"],"mappings":"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","file":"cool/ui/components/form-item/form-item.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./form-item.vue?vue&type=template&id=af0d6344&\"\nvar renderjs\nimport script from \"./form-item.vue?vue&type=script&lang=js&\"\nexport * from \"./form-item.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"src/cool/ui/components/form-item/form-item.vue\"\nexport default component.exports","export * from \"-!../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-0!../../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./form-item.vue?vue&type=template&id=af0d6344&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./form-item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./form-item.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport AsyncValidator from '../../utils/async-validator';\nimport { getParent } from '../../utils';\n\nexport default {\n\tprops: {\n\t\tprop: String,\n\t\tlabel: String,\n\t\tdisabled: Boolean,\n\t\tlabelWidth: String,\n\t\tshowMessage: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tjustify: {\n\t\t\ttype: String,\n\t\t\tdefault: 'start'\n\t\t},\n\t\tvalidateOnValueChange: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\trequired: false,\n\t\t\tmessage: null,\n\t\t\terror: false,\n\t\t\tvalidator: null\n\t\t};\n\t},\n\n\tcomputed: {\n\t\tlabel2() {\n\t\t\treturn this.label == 'true' ? '' : this.label;\n\t\t},\n\n\t\tlabelWidth2() {\n\t\t\treturn this.labelWidth || this.parent.labelWidth;\n\t\t},\n\n\t\tshowMessage2() {\n\t\t\treturn (this.showMessage || this.parent.showMessage) && this.error;\n\t\t},\n\n\t\tcontentWidth() {\n\t\t\treturn `calc(100% - ${this.labelWidth} - 20rpx)`;\n\t\t},\n\n\t\tisJustify() {\n\t\t\treturn this.justify !== 'start' ? `is-justify-${this.justify}` : '';\n\t\t},\n\n\t\tisRequired() {\n\t\t\treturn this.required ? 'cl-form-item--required' : '';\n\t\t},\n\n\t\tisError() {\n\t\t\treturn this.error ? 'cl-form-item--error' : '';\n\t\t},\n\n\t\tisSuffix() {\n\t\t\treturn this.$scopedSlots.suffix ? 'cl-form-item--suffix' : '';\n\t\t},\n\n\t\tisDisabled() {\n\t\t\treturn this.disabled ? 'cl-form-item--disabled' : '';\n\t\t},\n\n\t\tparent() {\n\t\t\tlet parent = getParent.call(this, 'ClForm', [\n\t\t\t\t'labelWidth',\n\t\t\t\t'showMessage',\n\t\t\t\t'model',\n\t\t\t\t'addField',\n\t\t\t\t'removeField',\n\t\t\t\t'validateOnValueChange',\n\t\t\t\t'rules2'\n\t\t\t]);\n\n\t\t\tparent.rules = parent.rules2;\n\n\t\t\tthis.changeRule(parent);\n\n\t\t\treturn parent;\n\t\t}\n\t},\n\n\tdestroyed() {\n\t\tif (this.parent.removeField) {\n\t\t\tthis.parent.removeField(this.prop);\n\t\t}\n\t},\n\n\tmethods: {\n\t\tchangeRule({ rules = {}, addField }) {\n\t\t\tif (!rules) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst rule = rules[this.prop];\n\n\t\t\tif (rule) {\n\t\t\t\tthis.required = false;\n\t\t\t\tthis.message = '';\n\n\t\t\t\tif (rule instanceof Array) {\n\t\t\t\t\trule.forEach(e => {\n\t\t\t\t\t\tif (e.required) {\n\t\t\t\t\t\t\tthis.required = e.required;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (e.message) {\n\t\t\t\t\t\t\tthis.message = e.message;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.required = rule.required;\n\t\t\t\t\tthis.message = rule.message;\n\t\t\t\t}\n\n\t\t\t\t// 检验器\n\t\t\t\tthis.validator = new AsyncValidator({\n\t\t\t\t\t[this.prop]: rule\n\t\t\t\t});\n\n\t\t\t\t// 响应事件\n\t\t\t\taddField(this.prop, this.onResponse);\n\t\t\t}\n\t\t},\n\n\t\tonResponse({ value, action }) {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tif (action == 'clear') {\n\t\t\t\t\tthis.error = false;\n\t\t\t\t}\n\n\t\t\t\tif (action == 'validate') {\n\t\t\t\t\tif (this.validateOnValueChange || this.parent.validateOnValueChange) {\n\t\t\t\t\t\tthis.validate(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tonListener(parent) {\n\t\t\tlet unwatch = this.$watch(\n\t\t\t\t() => {\n\t\t\t\t\treturn parent.model[this.prop];\n\t\t\t\t},\n\t\t\t\tval => {\n\t\t\t\t\tthis.validate(val);\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdeep: false\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// unwatch();\n\t\t},\n\n\t\tvalidate(val) {\n\t\t\tthis.validator.validate({ [this.prop]: val }, (errors, fields) => {\n\t\t\t\tthis.error = errors;\n\t\t\t});\n\t\t}\n\t}\n};\n"],"sourceRoot":""}